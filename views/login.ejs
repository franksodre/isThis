<form>
    <!-- <label for="">name</label>
    <input type="text" name="name" required />
-->
    <label for="">email</label>
    <input type="email" name="email" required />
<!-- <label for="">password</label>
    <input type="text" name="password" required />
-->

    <button type="submit">submit</button>
</form>
    <button type="submit" class="button_refreshToken">refresh token</button>
<script>
    const form = document.querySelector('form');
    const btnRefresh = document.querySelector('.button_refreshToken');

    async function RefreshRequest (){
        try {
            await fetch('/api/users/refreshToken', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' }
            })
        } catch(e) {
            console.log(e);
        }
    }

    btnRefresh.addEventListener('click',async () => {
        const response = await fetch('/api/users/products', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' }
        })
        if(response.status === 401){
            window.location = 'http://localhost:5000/api/users/products';
            return RefreshRequest();
        }

    })

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const email = form.email.value;
        // const password = form.password.value;

        try {
            const response = await fetch('/api/users/login', {
                method: 'POST',
                body: JSON.stringify({ email/*,password*/ }),
                headers: { 'Content-Type': 'application/json' }
            })
            const data = await response.json()
            console.log(data)
            // if(response.ok){
            //     window.location = 'https://www.youtube.com/'
            // }
        } catch (e) {
            console.log(e)
        }
})
</script>